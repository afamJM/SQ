!function(e,t){"use strict";"function"==typeof define&&define.amd?define(function(){return new(t(e,e.document))}):"undefined"!=typeof module&&module.exports?module.exports=new(t(e,e.document)):e.Push=new(t(e,e.document))}("undefined"!=typeof window?window:this,function(e){var t=function(){var t=this,i=function(e){return void 0===e},n=function(e){return String(e)===e},a=function(e){return e&&"[object Function]"==={}.toString.call(e)},s=0,o="PushError: push.js is incompatible with browser.",r=!1,l={},d=function(t){var i=!1,n=l[t];if("undefined"!=typeof n){if(n.close)n.close();else if(n.cancel)n.cancel();else{if(!e.external||!e.external.msIsSiteMode)throw i=!0,new Error("Unable to close notification: unknown interface");e.external.msSiteModeClearIconOverlay()}if(!i)return c(t)}return!1},u=function(e){var t=s;return l[t]=e,s++,t},c=function(e){var t,i={},n=!1;for(t in l)l.hasOwnProperty(t)&&(t!=e?i[t]=l[t]:n=!0);return l=i,n},p=function(s,o){var r,l,p,h;if(o=o||{},t.lastWorkerPath=o.serviceWorker||"sw.js",e.Notification)try{r=new e.Notification(s,{icon:n(o.icon)||i(o.icon)?o.icon:o.icon.x32,body:o.body,tag:o.tag,requireInteraction:o.requireInteraction})}catch(t){e.navigator&&(e.navigator.serviceWorker.register(o.serviceWorker||"sw.js"),e.navigator.serviceWorker.ready.then(function(e){e.showNotification(s,{body:o.body,vibrate:o.vibrate,tag:o.tag,requireInteraction:o.requireInteraction})}))}else if(e.webkitNotifications)r=e.webkitNotifications.createNotification(o.icon,s,o.body),r.show();else if(navigator.mozNotification)r=navigator.mozNotification.createNotification(s,o.body,o.icon),r.show();else{if(!e.external||!e.external.msIsSiteMode())throw new Error("Unable to create notification: unknown interface");e.external.msSiteModeClearIconOverlay(),e.external.msSiteModeSetIconOverlay(n(o.icon)||i(o.icon)?o.icon:o.icon.x16,s),e.external.msSiteModeActivate(),r={}}return p=u(r),l={get:function(){return r},close:function(){d(p)}},o.timeout&&setTimeout(function(){l.close()},o.timeout),a(o.onShow)&&r.addEventListener("show",o.onShow),a(o.onError)&&r.addEventListener("error",o.onError),a(o.onClick)&&r.addEventListener("click",o.onClick),h=function(){c(p),a(o.onClose)&&o.onClose.call(this)},r.addEventListener("close",h),r.addEventListener("cancel",h),l},h={DEFAULT:"default",GRANTED:"granted",DENIED:"denied"},f=[h.GRANTED,h.DEFAULT,h.DENIED];t.Permission=h,t.Permission.request=function(i,n){if(!t.isSupported)throw new Error(o);if(callback=function(e){switch(e){case t.Permission.GRANTED:r=!0,i&&i();break;case t.Permission.DENIED:r=!1,n&&n()}},e.Notification&&e.Notification.requestPermission)Notification.requestPermission(callback);else{if(!e.webkitNotifications||!e.webkitNotifications.checkPermission)throw new Error(o);e.webkitNotifications.requestPermission(callback)}},t.Permission.has=function(){return r},t.Permission.get=function(){var i;if(!t.isSupported)throw new Error(o);if(e.Notification&&e.Notification.permissionLevel)i=e.Notification.permissionLevel;else if(e.webkitNotifications&&e.webkitNotifications.checkPermission)i=f[e.webkitNotifications.checkPermission()];else if(e.Notification&&e.Notification.permission)i=e.Notification.permission;else if(navigator.mozNotification)i=f.GRANTED;else{if(!e.external||void 0===e.external.msIsSiteMode())throw new Error(o);i=e.external.msIsSiteMode()?h.GRANTED:h.DEFAULT}return i},t.isSupported=function(){var t=!1;try{t=!!(e.Notification||e.webkitNotifications||navigator.mozNotification||e.external&&void 0!==e.external.msIsSiteMode())}catch(e){}return t}(),t.create=function(e,i){if(!t.isSupported)throw new Error(o);if(!n(e))throw new Error("PushError: Title of notification must be a string");return t.Permission.has()?new Promise(function(t,n){try{t(p(e,i))}catch(e){n(e)}}):new Promise(function(n,a){t.Permission.request(function(){try{n(p(e,i))}catch(e){a(e)}},function(){a("Permission request declined")})})},t.count=function(){var e,t=0;for(e in l)t++;return t},t.__lastWorkerPath=function(){return t.lastWorkerPath},t.close=function(e){var t;for(t in l)if(notification=l[t],notification.tag===e)return d(t)},t.clear=function(){var e=!0;for(key in l){var t=d(key);e=e&&t}return e}};return t});