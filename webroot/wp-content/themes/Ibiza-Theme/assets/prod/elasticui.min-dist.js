var elasticui;!function(elasticui){var util;!function(util){var EjsCollection=function(){function EjsCollection(){this.ejsObjects=[],this.jsonObjects=[]}return EjsCollection.prototype.indexOf=function(ejsObject){return this.jsonObjects.indexOf(util.EjsTool.getJsonFromEjsObject(ejsObject))},EjsCollection.prototype.add=function(ejsObject){var idx=this.indexOf(ejsObject);idx==-1&&(this.ejsObjects.push(ejsObject),this.jsonObjects.push(util.EjsTool.getJsonFromEjsObject(ejsObject)))},EjsCollection.prototype.remove=function(ejsObject){var idx=this.indexOf(ejsObject);idx>-1&&(this.ejsObjects.splice(idx,1),this.jsonObjects.splice(idx,1))},EjsCollection}();util.EjsCollection=EjsCollection}(util=elasticui.util||(elasticui.util={}))}(elasticui||(elasticui={}));var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},elasticui;!function(elasticui){var util;!function(util){var FilterCollection=function(_super){function FilterCollection(){_super.apply(this,arguments)}return __extends(FilterCollection,_super),FilterCollection.prototype.getAsFilter=function(){return util.FilterTool.combineFilters(this.ejsObjects)},FilterCollection.prototype.getAsORFilter=function(){return util.FilterTool.combineFiltersShould(this.ejsObjects)},FilterCollection.prototype.contains=function(filter){return this.indexOf(filter)>-1},FilterCollection}(util.EjsCollection);util.FilterCollection=FilterCollection}(util=elasticui.util||(elasticui.util={}))}(elasticui||(elasticui={}));var elasticui;!function(elasticui){var util;!function(util){var FilterTool=function(){function FilterTool(){}return FilterTool.combineFilters=function(filters){return 1===filters.length?filters[0]:filters.length>1?ejs.BoolFilter().must(filters):null},FilterTool.combineFiltersShould=function(filters){return 1===filters.length?filters[0]:filters.length>1?ejs.BoolFilter().should(filters):null},FilterTool}();util.FilterTool=FilterTool}(util=elasticui.util||(elasticui.util={}))}(elasticui||(elasticui={}));var elasticui;!function(elasticui){var services;!function(_services){_services.services=angular.module("elasticui.services",[])}(services=elasticui.services||(elasticui.services={}))}(elasticui||(elasticui={}));var elasticui;!function(elasticui){var directives;!function(_directives){_directives.directives=angular.module("elasticui.directives",[])}(directives=elasticui.directives||(elasticui.directives={}))}(elasticui||(elasticui={}));var elasticui;!function(elasticui){var directives;!function(directives){var AggregationDirective=function(){function AggregationDirective(){var directive={};return directive.restrict="EAC",directive.scope=!0,directive.controller=elasticui.controllers.AggregationController,directive.link=function(scope,element,attrs,aggCtrl){scope.$watch(element.attr("eui-aggregation")+" | euiCached",function(val){return scope.aggregation.agg=val});var filterSelf=!0,filterSelfAttr=element.attr("eui-filter-self");filterSelfAttr&&(scope.$watch(filterSelfAttr,function(val){return scope.aggregation.filterSelf=val}),filterSelf=scope.$eval(filterSelfAttr)),scope.aggregation={agg:scope.$eval(element.attr("eui-aggregation")+" | euiCached"),filterSelf:filterSelf},aggCtrl.init()},directive}return AggregationDirective}();directives.AggregationDirective=AggregationDirective,directives.directives.directive("euiAggregation",elasticui.directives.AggregationDirective)}(directives=elasticui.directives||(elasticui.directives={}))}(elasticui||(elasticui={}));var elasticui;!function(elasticui){var directives;!function(directives){var FilterDirective=function(){function FilterDirective(){var directive={};return directive.restrict="A",directive.scope=!0,directive.controller=elasticui.controllers.FilterController,directive.link=function(scope,element,attrs,filterCtrl){scope.$watch(element.attr("eui-filter")+" | euiCached",function(val){return scope.filter.filter=val});var enabled=!1,enabledAttr=element.attr("eui-enabled");enabledAttr&&(scope.$watch(enabledAttr,function(val){return scope.filter.enabled=val}),enabled=scope.$eval(enabledAttr)),scope.filter={filter:scope.$eval(element.attr("eui-filter")+" | euiCached"),enabled:enabled},filterCtrl.init()},directive}return FilterDirective}();directives.FilterDirective=FilterDirective,directives.directives.directive("euiFilter",FilterDirective)}(directives=elasticui.directives||(elasticui.directives={}))}(elasticui||(elasticui={}));var elasticui;!function(elasticui){var directives;!function(directives){var IndexDirective=function(){function IndexDirective(){var directive={};return directive.restrict="EAC",directive.scope=!1,directive.controller=elasticui.controllers.IndexController,directive.link=function(scope,element,attrs,indexCtrl){scope.$watch(attrs.euiIndex,function(val){indexCtrl.indexVM.index=val}),indexCtrl.indexVM.index=scope.$eval(attrs.euiIndex)},directive}return IndexDirective}();directives.IndexDirective=IndexDirective,directives.directives.directive("euiIndex",IndexDirective)}(directives=elasticui.directives||(elasticui.directives={}))}(elasticui||(elasticui={}));var elasticui;!function(elasticui){var directives;!function(directives){var InvertedDirective=function(){function InvertedDirective(){var directive={};return directive.require="ngModel",directive.link=function(scope,element,attrs,ngModel){ngModel.$parsers.push(function(val){return!val}),ngModel.$formatters.push(function(val){return!val})},directive}return InvertedDirective}();directives.InvertedDirective=InvertedDirective,directives.directives.directive("euiInverted",InvertedDirective)}(directives=elasticui.directives||(elasticui.directives={}))}(elasticui||(elasticui={}));var elasticui;!function(elasticui){var directives;!function(directives){var OrFilterDirective=function(){function OrFilterDirective(){var directive={};return directive.restrict="EAC",directive.scope=!0,directive.controller=elasticui.controllers.OrFilterController,directive.link=function(){},directive}return OrFilterDirective}();directives.OrFilterDirective=OrFilterDirective,directives.directives.directive("euiOrFilter",OrFilterDirective)}(directives=elasticui.directives||(elasticui.directives={}))}(elasticui||(elasticui={}));var elasticui;!function(elasticui){var directives;!function(directives){var SortDirective=function(){function SortDirective(){var directive={};return directive.restrict="A",directive.scope=!0,directive.controller=elasticui.controllers.SortController,directive.link=function(scope,element,attrs,sortCtrl){scope.$watch(element.attr("eui-sort")+" | euiCached",function(val){return scope.sorting.sort=val});var enabled=!1,enabledAttr=element.attr("eui-enabled");enabledAttr&&(scope.$watch(enabledAttr,function(val){return scope.sorting.enabled=val}),enabled=scope.$eval(enabledAttr)),scope.sorting={sort:scope.$eval(element.attr("eui-sort")+" | euiCached"),enabled:enabled},sortCtrl.init()},directive}return SortDirective}();directives.SortDirective=SortDirective,directives.directives.directive("euiSort",SortDirective)}(directives=elasticui.directives||(elasticui.directives={}))}(elasticui||(elasticui={}));var elasticui;!function(elasticui){var directives;!function(directives){var VarDirective=function(){function VarDirective(){var directive={};return directive.restrict="EAC",directive.scope=!1,directive.transclude=!1,directive.link={pre:function(scope,element){var key=element.attr("eui-key");scope.$watch(element.attr("eui-value"),function(newVal,oldVal){angular.equals(newVal,oldVal)||(scope[key]=newVal)},!0),scope[key]=scope.$eval(element.attr("eui-value"))}},directive}return VarDirective.$inject=["$timeout"],VarDirective}();directives.VarDirective=VarDirective,directives.directives.directive("euiVar",VarDirective)}(directives=elasticui.directives||(elasticui.directives={}))}(elasticui||(elasticui={}));var elasticui;!function(elasticui){var filters;!function(_filters){_filters.filters=angular.module("elasticui.filters",[])}(filters=elasticui.filters||(elasticui.filters={}))}(elasticui||(elasticui={}));var elasticui;!function(elasticui){var filters;!function(filters){var CachedFilter=function(){function CachedFilter(){var values={};return function(input){if(!input)return input;var json=angular.toJson(input.toJSON());return values[json]||(values[json]=input),values[json]}}return CachedFilter}();filters.CachedFilter=CachedFilter,filters.filters.filter("euiCached",CachedFilter)}(filters=elasticui.filters||(elasticui.filters={}))}(elasticui||(elasticui={}));var elasticui;!function(elasticui){var filters;!function(filters){var MapFilter=function(){function MapFilter(){return function(input,property){if(!input||!input.length)return input;var arr=MapFilter.parseString(property);return input.map(function(el){return[el.key,MapFilter.getValue(el,arr)]})}}return MapFilter.parseString=function(input){return input.split(".")},MapFilter.getValue=function(element,propertyArray){var value=element;return angular.forEach(propertyArray,function(property){return value?void(value=value[property]):value}),value},MapFilter}();filters.MapFilter=MapFilter,filters.filters.filter("euiMap",MapFilter)}(filters=elasticui.filters||(elasticui.filters={}))}(elasticui||(elasticui={}));var elasticui;!function(elasticui){var filters;!function(filters){var PageRangeFilter=function(){function PageRangeFilter(){return function(input,total,current,neighbours){void 0===neighbours&&(neighbours=5);for(var i=1;i<=total;i++)i<=current+neighbours&&i>=current-neighbours||i<current&&current-neighbours<4||i>current+neighbours&&total-(current+neighbours)<4?input.push(i):1==i?input.push(1,-1):i==total&&input.push(-2,total);return input}}return PageRangeFilter}();filters.PageRangeFilter=PageRangeFilter,filters.filters.filter("euiPageRange",PageRangeFilter)}(filters=elasticui.filters||(elasticui.filters={}))}(elasticui||(elasticui={}));var elasticui;!function(elasticui){var filters;!function(filters){var RangeFilter=function(){function RangeFilter(){return function(input,total){total=parseInt(total);for(var i=0;i<total;i++)input.push(i);return input}}return RangeFilter}();filters.RangeFilter=RangeFilter,filters.filters.filter("euiRange",RangeFilter)}(filters=elasticui.filters||(elasticui.filters={}))}(elasticui||(elasticui={}));var elasticui;!function(elasticui){var filters;!function(filters){var RoundFilter=function(){function RoundFilter(){return function(input){return input?Math.round(input):input}}return RoundFilter}();filters.RoundFilter=RoundFilter,filters.filters.filter("euiRound",RoundFilter)}(filters=elasticui.filters||(elasticui.filters={}))}(elasticui||(elasticui={}));var elasticui;!function(elasticui){var filters;!function(filters){var TimestampFilter=function(){function TimestampFilter(){return function(input){return new Date(input).getTime()}}return TimestampFilter}();filters.TimestampFilter=TimestampFilter,filters.filters.filter("euiTimestamp",TimestampFilter)}(filters=elasticui.filters||(elasticui.filters={}))}(elasticui||(elasticui={})),angular.module("elasticui.controllers",[]).controller(elasticui.controllers);var elasticui;!function(elasticui){var controllers;!function(controllers){var AggregationController=function(){function AggregationController($scope){this.scope=$scope}return AggregationController.prototype.init=function(){var _this=this;this.scope.$parent.$watch("indexVM.results",function(){return _this.updateResults()}),this.scope.$watch("aggregation.agg",function(newVal,oldVal){elasticui.util.EjsTool.equals(oldVal,newVal)||(_this.previousProvider&&_this.scope.indexVM.aggregationProviders.remove(_this.previousProvider),_this.updateAgg())}),this.scope.$watch("aggregation.filterSelf",function(newVal,oldVal){newVal!==oldVal&&(_this.previousProvider&&_this.scope.indexVM.aggregationProviders.remove(_this.previousProvider),_this.updateAgg())}),this.scope.$on("$destroy",function(){_this.previousProvider&&_this.scope.indexVM.aggregationProviders.remove(_this.previousProvider)}),this.updateAgg()},AggregationController.prototype.updateResults=function(){var res=this.scope.indexVM.results;if(this.scope.aggregation.agg&&res&&res.aggregations){var name=AggregationController.getAggName(this.scope.aggregation.agg),aggKey=Object.keys(res.aggregations).filter(function(key){return key==name||key=="filtered_"+name})[0],agg=res.aggregations[aggKey];aggKey=="filtered_"+name&&(agg=agg[name]),this.scope.aggResult=agg}},AggregationController.prototype.updateAgg=function(){var _this=this,provider=null;this.scope.aggregation.agg&&(provider=function(filters){return _this.getAggregation(filters)}),provider&&this.scope.indexVM.aggregationProviders.add(provider),this.previousProvider=provider},AggregationController.getAggName=function(ejsAggregation){return Object.keys(ejsAggregation.toJSON())[0]},AggregationController.prototype.getAggregationExplicit=function(ejsAggregation,filterSelf,filters){var _this=this;if(!ejsAggregation)return null;var facetFilters=filters;filterSelf||(facetFilters=facetFilters.filter(function(val){return val!=_this.scope.combinedFilter&&("undefined"==typeof val.field||val.field()!=ejsAggregation.field())}));var combinedFilters=elasticui.util.FilterTool.combineFilters(facetFilters);return null!=combinedFilters&&(ejsAggregation=new ejs.FilterAggregation("filtered_"+AggregationController.getAggName(ejsAggregation)).filter(combinedFilters).agg(ejsAggregation)),ejsAggregation},AggregationController.prototype.getAggregation=function(filters){return this.getAggregationExplicit(this.scope.aggregation.agg,this.scope.aggregation.filterSelf,filters)},AggregationController.$inject=["$scope"],AggregationController}();controllers.AggregationController=AggregationController}(controllers=elasticui.controllers||(elasticui.controllers={}))}(elasticui||(elasticui={}));var elasticui;!function(elasticui){var controllers;!function(controllers){var FilterController=function(){function FilterController($scope){this.scope=$scope}return FilterController.prototype.init=function(){var _this=this;if(this.scope.filter.filter){var isEnabled=this.scope.filters.contains(this.scope.filter.filter);!isEnabled&&this.scope.filter.enabled&&(this.scope.filters.add(this.scope.filter.filter),isEnabled=!0)}this.scope.filter.enabled=isEnabled,this.scope.$watch("filter.enabled",function(newVal,oldVal){newVal!==oldVal&&_this.updateFilter()}),this.scope.$watch("filter.filter",function(newVal,oldVal){elasticui.util.EjsTool.equals(oldVal,newVal)||(oldVal&&_this.scope.filters.remove(oldVal),_this.updateFilter())})},FilterController.prototype.updateFilter=function(){this.scope.filter.filter&&(this.scope.filter.enabled?this.scope.filters.add(this.scope.filter.filter):this.scope.filters.remove(this.scope.filter.filter))},FilterController.$inject=["$scope"],FilterController}();controllers.FilterController=FilterController}(controllers=elasticui.controllers||(elasticui.controllers={}))}(elasticui||(elasticui={}));var elasticui;!function(elasticui){var controllers;!function(controllers){var IndexController=function(){function IndexController($scope,$timeout,$window,es,$rootScope){$scope.location=$rootScope;var _this=this;this.filters=new elasticui.util.FilterCollection,this.indexVM={host:null,query:null,sort:null,aggregationProviders:new elasticui.util.SimpleSet,filters:this.filters,highlight:null,loaded:!1,page:1,index:null,loading:!1,pageCount:0,pageSize:9,results:null,refresh:function(softRefresh){return void 0===softRefresh&&(softRefresh=!0),_this.refresh(softRefresh)},search:function(){1==started&&(_this.indexVM.page=1),_this.search()},error:null,autoLoad:!0},indexVm=this.indexVM,this.searchPromise=null,this.refreshPromise=null,this.es=es,this.$rootScope=$rootScope,$scope.indexVM=this.indexVM,$scope.ejs=$window.ejs,$scope.filters=this.filters,$scope.$watchCollection("indexVM.filters.ejsObjects",function(){1==started&&(_this.indexVM.page=1),_this.search()}),$scope.$watchCollection("indexVM.aggregationProviders.objects",function(){return _this.search()}),$scope.$watch("indexVM.host",function(){null!=_this.indexVM.host&&es.setHost(_this.indexVM.host)&&_this.search()}),$scope.$watch("indexVM.sort",function(){_this.search()}),$scope.$watch("indexVM.pageSize",function(){_this.search()}),$scope.$watch("indexVM.page",function(){return _this.search()}),$scope.$watch("indexVM.index",function(){return _this.search()}),$scope.$watch("indexVM.query",function(){return _this.search()}),$scope.$watch("indexVM.highlight",function(){return _this.search()}),$timeout(function(){return _this.loaded()},200)}return IndexController.prototype.loaded=function(){this.indexVM.loaded||(this.indexVM.loaded=!0,this.indexVM.autoLoad&&this.search())},IndexController.prototype.getSearchPromise=function(){for(var request=ejs.Request(),i=0;i<this.indexVM.aggregationProviders.objects.length;i++){var provider=this.indexVM.aggregationProviders.objects[i],agg=provider(this.filters.ejsObjects);request.agg(agg)}var combinedFilter=this.filters.getAsFilter();null!=combinedFilter&&request.filter(combinedFilter),null!=this.indexVM.query?request.query(this.indexVM.query):request.query(ejs.MatchAllQuery()),null!=this.indexVM.sort&&request.sort(this.indexVM.sort),null!=this.indexVM.highlight&&request.highlight(this.indexVM.highlight);var res=this.es.client.search({index:this.indexVM.index,size:this.indexVM.pageSize,from:this.indexVM.pageSize*(this.indexVM.page-1),body:request});return res},IndexController.prototype.onError=function(err){this.$rootScope.$broadcast("eui-search-error",err),this.indexVM.error=err},IndexController.prototype.search=function(){var _this=this;if(this.indexVM.loaded&&this.indexVM.index){if(null!=this.refreshPromise){var promiseToAbort=this.refreshPromise;this.refreshPromise=null,promiseToAbort.abort()}if(null!=this.searchPromise){var promiseToAbort=this.searchPromise;this.searchPromise=null,promiseToAbort.abort()}this.indexVM.loading=!0,this.searchPromise=this.getSearchPromise(),this.searchPromise.then(function(body){_this.searchPromise=null,_this.indexVM.error=null,_this.onResult(body)},function(err){_this.searchPromise&&(_this.searchPromise=null,_this.onError(err))})}},IndexController.prototype.refresh=function(softRefresh){var _this=this;void 0===softRefresh&&(softRefresh=!0),this.indexVM.loaded&&this.indexVM.index&&null==this.searchPromise&&(this.indexVM.loading=!0,this.refreshPromise=this.getSearchPromise(),this.refreshPromise.then(function(body){_this.refreshPromise=null,_this.indexVM.error=null,_this.onResult(body,softRefresh)},function(err){_this.refreshPromise&&(_this.refreshPromise=null,_this.onError(err))}))},IndexController.prototype.onResult=function(body,updateOnlyIfCountChanged){"function"==typeof elastic_callback&&elastic_callback(body,updateOnlyIfCountChanged),void 0===updateOnlyIfCountChanged&&(updateOnlyIfCountChanged=!1),updateOnlyIfCountChanged&&null!=this.indexVM.results&&this.indexVM.results.hits.total==body.hits.total||(this.indexVM.results=body,this.indexVM.pageCount=Math.ceil(this.indexVM.results.hits.total/this.indexVM.pageSize)),this.indexVM.loading=!1},IndexController.$inject=["$scope","$timeout","$window","es","$rootScope"],IndexController}();controllers.IndexController=IndexController}(controllers=elasticui.controllers||(elasticui.controllers={}))}(elasticui||(elasticui={}));var elasticui;!function(elasticui){var controllers;!function(controllers){var OrFilterController=function(){function OrFilterController($scope){var _this=this;this.filters=new elasticui.util.FilterCollection,$scope.filters=this.filters,$scope.$watchCollection("filters.ejsObjects",function(){return _this.updateCombinedFilter()}),this.scope=$scope}return OrFilterController.prototype.updateCombinedFilter=function(){this.scope.combinedFilter&&this.scope.$parent.filters.remove(this.scope.combinedFilter),this.scope.combinedFilter=this.filters.getAsORFilter(),this.scope.combinedFilter&&this.scope.$parent.filters.add(this.scope.combinedFilter)},OrFilterController.$inject=["$scope"],OrFilterController}();controllers.OrFilterController=OrFilterController}(controllers=elasticui.controllers||(elasticui.controllers={}))}(elasticui||(elasticui={}));var elasticui;!function(elasticui){var controllers;!function(controllers){var SortController=function(){function SortController($scope){this.scope=$scope}return SortController.prototype.init=function(){var _this=this;this.scope.$watch("indexVM.sort",function(){return _this.updateEnabled()}),this.scope.$watch("sorting.sort",function(){return _this.updateSort()}),this.scope.$watch("sorting.enabled",function(newVal,oldVal){newVal!==oldVal&&_this.updateSort()}),this.updateSort()},SortController.prototype.updateSort=function(){this.scope.sorting.enabled?this.scope.indexVM.sort=this.scope.sorting.sort:this.isEnabledOnIndexScope()&&(this.scope.indexVM.sort=null)},SortController.prototype.updateEnabled=function(){this.scope.sorting.enabled=this.isEnabledOnIndexScope()},SortController.prototype.isEnabledOnIndexScope=function(){return null!=this.scope.indexVM.sort&&angular.equals(this.scope.indexVM.sort.toJSON(),this.scope.sorting.sort.toJSON())},SortController.$inject=["$scope"],SortController}();controllers.SortController=SortController}(controllers=elasticui.controllers||(elasticui.controllers={}))}(elasticui||(elasticui={}));var elasticui;!function(elasticui){var services;!function(services){var ElasticService=function(){function ElasticService(esFactory,euiHost){this.esFactory=esFactory,this.setHost(euiHost)}return ElasticService.prototype.setHost=function(host){return host!==this.host&&(this.host=host,this.client=this.esFactory({host:host,calcDeadTimeout:"flat"}),!0)},ElasticService.$inject=["esFactory","euiHost"],ElasticService}();services.ElasticService=ElasticService,services.services.service("es",ElasticService)}(services=elasticui.services||(elasticui.services={}))}(elasticui||(elasticui={})),angular.module("elasticui",["elasticsearch","elasticui.filters","elasticui.controllers","elasticui.services","elasticui.directives","elasticui.widgets.directives"]);var elasticui;!function(elasticui){var widgets;!function(widgets){var directives;!function(_directives){_directives.directives=angular.module("elasticui.widgets.directives",[]),_directives.default_agg_count=0}(directives=widgets.directives||(widgets.directives={}))}(widgets=elasticui.widgets||(elasticui.widgets={}))}(elasticui||(elasticui={}));var elasticui;!function(elasticui){var widgets;!function(widgets){var directives;!function(directives){var ChecklistDirective=function(){function ChecklistDirective($parse){var directive={};return directive.restrict="E",directive.scope=!0,directive.link={pre:function(scope,element,attrs){elasticui.util.AngularTool.setupBinding($parse,scope,attrs,["field","size","display"]),scope.agg_name=scope.field.replace(/[^a-z_0-9]/gim,"_")+"_"+directives.default_agg_count++}},directive.template='                    <h3>{{display}}</h3>                    <ul class="nav nav-list" eui-aggregation="ejs.TermsAggregation(agg_name).field(field).size(size)" eui-filter-self="false">                        <li ng-repeat="bucket in aggResult.buckets">                            <label class="checkbox" eui-filter="ejs.TermsFilter(field, bucket.key)">                                <input type="checkbox" ng-model="filter.enabled" data-id="the_value_{{field}}_{{bucket.key | makeUppercase }}">                                {{bucket.key}} ({{bucket.doc_count}})                            </label>                        </li>                    </ul>',directive}return ChecklistDirective.$inject=["$parse"],ChecklistDirective}();directives.ChecklistDirective=ChecklistDirective,directives.directives.directive("euiChecklist",ChecklistDirective)}(directives=widgets.directives||(widgets.directives={}))}(widgets=elasticui.widgets||(elasticui.widgets={}))}(elasticui||(elasticui={}));var elasticui;!function(elasticui){var widgets;!function(widgets){var directives;!function(directives){var RangeDirective=function(){function RangeDirective($parse){var directive={};return directive.restrict="E",directive.scope=!0,directive.link={pre:function(scope,element,attrs){elasticui.util.AngularTool.setupBinding($parse,scope,attrs,["field","size","min","max","display"]),scope.agg_name=scope.field.replace(/[^a-z_0-9]/gim,"_")+"_"+directives.default_agg_count++}},directive.template='                    <ul class="nav " eui-aggregation="ejs.FilterAggregation(agg_name).filter(ejs.RangeFilter(agg_name).gt(min).lt(max).field(field)) ">                        <li class="rst_{{aggResult.doc_count}}">                            <label class="checkbox" eui-filter="ejs.RangeFilter(\'price\').gt(min).lt(max)">                                <input type="checkbox" ng-model="filter.enabled" data-id="the_value_{{field}}_{{min}}_{{max}}">                                &pound;{{min}} - &pound;{{max}} ({{aggResult.doc_count}})                            </label>                        </li>                    </ul>',directive}return RangeDirective.$inject=["$parse"],RangeDirective}();directives.RangeDirective=RangeDirective,directives.directives.directive("euiRange",RangeDirective)}(directives=widgets.directives||(widgets.directives={}))}(widgets=elasticui.widgets||(elasticui.widgets={}))}(elasticui||(elasticui={}));var elasticui;!function(elasticui){var widgets;!function(widgets){var directives;!function(directives){var SimplePagingDirective=function(){function SimplePagingDirective(){var directive={};return directive.restrict="E",directive.scope=!0,directive.template='            <ul class="pager" data-id="pager">                <li ng-if="indexVM.page <= 1" class="disabled"><a href=""><</a></li>                <li ng-if="indexVM.page > 1"><a href="" ng-click="indexVM.page=indexVM.page - 1"><</a></li>                <li class="page-count">Page {{indexVM.page}} of {{indexVM.pageCount}}</li>                <li ng-if="indexVM.pageCount <= indexVM.page" class="disabled"><a href="">></a></li>                <li ng-if="indexVM.pageCount > indexVM.page"><a href="" ng-click="indexVM.page=indexVM.page + 1">></a></li>            </ul>',directive}return SimplePagingDirective}();directives.SimplePagingDirective=SimplePagingDirective,directives.directives.directive("euiSimplePaging",SimplePagingDirective)}(directives=widgets.directives||(widgets.directives={}))}(widgets=elasticui.widgets||(elasticui.widgets={}))}(elasticui||(elasticui={}));var elasticui;!function(elasticui){var widgets;!function(widgets){var directives;!function(directives){var SimplePaginationDirective=function(){function SimplePaginationDirective(){var directive={};return directive.restrict="E",directive.scope=!0,directive.template='            <ul class="pager" data-id="pager">            <li><pagination total-items="100" page="1" items-per-page="2" max-size="4" rotate="false" num-pages="numPages" previous-text="<" next-text=">" on-select-page=""></pagination></li>            </ul>',directive}return SimplePaginationDirective}();directives.SimplePagingDirective=SimplePaginationDirective,directives.directives.directive("euiSimplePagination",SimplePaginationDirective)}(directives=widgets.directives||(widgets.directives={}))}(widgets=elasticui.widgets||(elasticui.widgets={}))}(elasticui||(elasticui={}));var elasticui;!function(elasticui){var widgets;!function(widgets){var directives;!function(directives){var SingleselectDirective=function(){function SingleselectDirective($parse){var directive={};return directive.restrict="E",directive.scope=!0,directive.link={pre:function(scope,element,attrs){elasticui.util.AngularTool.setupBinding($parse,scope,attrs,["field","size"]),scope.agg_name=scope.field.replace(/[^a-z_0-9]/gim,"_")+"_"+directives.default_agg_count++}},directive.template='            <ul class="nav nav-list" eui-aggregation="ejs.TermsAggregation(agg_name).field(field).size(size)">                <li ng-repeat="bucket in aggResult.buckets">                    <label eui-filter="ejs.TermsFilter(field, bucket.key)">                        <span ng-if="!filter.enabled"><a href="" ng-click="filter.enabled=true">{{bucket.key}} <span class="muted">({{bucket.doc_count}})</span></a></span>                        <span ng-if="filter.enabled">{{bucket.key}} <a href="" ng-click="filter.enabled=false" class="facet-remove">x</a></span>                    </label>                </li>            </ul>',directive}return SingleselectDirective.$inject=["$parse"],SingleselectDirective}();directives.SingleselectDirective=SingleselectDirective,directives.directives.directive("euiSingleselect",SingleselectDirective)}(directives=widgets.directives||(widgets.directives={}))}(widgets=elasticui.widgets||(elasticui.widgets={}))}(elasticui||(elasticui={}));var elasticui;!function(elasticui){var controllers;!function(controllers){var HighlightController=function(){function HighlightController($scope){this.scope=$scope}return HighlightController.prototype.init=function(){var _this=this;this.scope.$watch("indexVM.highlight",function(){return _this.updateEnabled()}),this.scope.$watch("highlighting.highlight",function(){return _this.updateHighlight()}),this.scope.$watch("highlighting.enabled",function(newVal,oldVal){newVal!==oldVal&&_this.updateHighlight()}),this.updateHighlight()},HighlightController.prototype.updateHighlight=function(){this.scope.highlighting.enabled?this.scope.indexVM.highlight=this.scope.highlighting.highlight:this.isEnabledOnIndexScope()&&(this.scope.indexVM.highlight=null)},HighlightController.prototype.updateEnabled=function(){this.scope.highlighting.enabled=this.isEnabledOnIndexScope()},HighlightController.prototype.isEnabledOnIndexScope=function(){return null!=this.scope.indexVM.highlight&&angular.equals(this.scope.indexVM.highlight.toJSON(),this.scope.highlighting.highlight.toJSON())},HighlightController.$inject=["$scope"],HighlightController}();controllers.HighlightController=HighlightController}(controllers=elasticui.controllers||(elasticui.controllers={}))}(elasticui||(elasticui={}));var elasticui;!function(elasticui){var controllers;!function(controllers){var HostController=function(){function HostController($scope){this.scope=$scope}return HostController.prototype.init=function(){var _this=this;this.scope.$watch("indexVM.host",function(){return _this.readHost()}),this.scope.$watch("host",function(){return _this.updateHost()}),this.updateHost()},HostController.prototype.updateHost=function(){null!==this.scope.host&&(this.scope.indexVM.host=this.scope.host)},HostController.prototype.readHost=function(){this.scope.host=this.scope.indexVM.host},HostController.$inject=["$scope"],HostController}();controllers.HostController=HostController}(controllers=elasticui.controllers||(elasticui.controllers={}))}(elasticui||(elasticui={}));var elasticui;!function(elasticui){var controllers;!function(controllers){var QueryController=function(){function QueryController($scope){this.scope=$scope}return QueryController.prototype.init=function(){var _this=this;this.scope.$watch("query.enabled",function(newVal,oldVal){newVal!==oldVal&&_this.updateQuery()}),this.scope.$watch("query.query",function(newVal,oldVal){elasticui.util.EjsTool.equals(oldVal,newVal)||_this.updateQuery()}),this.updateQuery()},QueryController.prototype.updateQuery=function(){this.scope.query.query&&(this.scope.query.enabled?this.scope.indexVM.query=this.scope.query.query:this.scope.indexVM.query=null)},QueryController.$inject=["$scope"],QueryController}();controllers.QueryController=QueryController}(controllers=elasticui.controllers||(elasticui.controllers={}))}(elasticui||(elasticui={}));var elasticui;!function(elasticui){var directives;!function(directives){var HighlightDirective=function(){function HighlightDirective(){var directive={};return directive.restrict="A",directive.scope=!0,directive.controller=elasticui.controllers.HighlightController,directive.link=function(scope,element,attrs,highlightCtrl){scope.$watch(element.attr("eui-highlight")+" | euiCached",function(val){return scope.highlighting.highlight=val;
});var enabled=!1,enabledAttr=element.attr("eui-enabled");enabledAttr&&(scope.$watch(enabledAttr,function(val){return scope.highlighting.enabled=val}),enabled=scope.$eval(enabledAttr)),scope.highlighting={highlight:scope.$eval(element.attr("eui-highlight")+" | euiCached"),enabled:enabled},highlightCtrl.init()},directive}return HighlightDirective}();directives.HighlightDirective=HighlightDirective,directives.directives.directive("euiHighlight",HighlightDirective)}(directives=elasticui.directives||(elasticui.directives={}))}(elasticui||(elasticui={}));var elasticui;!function(elasticui){var directives;!function(directives){var HostDirective=function(){function HostDirective(){var directive={};return directive.restrict="A",directive.scope=!0,directive.controller=elasticui.controllers.HostController,directive.link=function(scope,element,attrs,hostCtrl){scope.$watch(element.attr("eui-host"),function(val){return scope.host=val}),scope.host=scope.$eval(element.attr("eui-host")),hostCtrl.init()},directive}return HostDirective}();directives.HostDirective=HostDirective,directives.directives.directive("euiHost",HostDirective)}(directives=elasticui.directives||(elasticui.directives={}))}(elasticui||(elasticui={}));var elasticui;!function(elasticui){var directives;!function(directives){var QueryDirective=function(){function QueryDirective(){var directive={};return directive.restrict="A",directive.scope=!0,directive.controller=elasticui.controllers.QueryController,directive.link=function(scope,element,attrs,queryCtrl){scope.$watch(element.attr("eui-query")+" | euiCached",function(val){return scope.query.query=val});var enabled=!1,enabledAttr=element.attr("eui-enabled");enabledAttr&&(scope.$watch(enabledAttr,function(val){return scope.query.enabled=val}),enabled=scope.$eval(enabledAttr)),scope.query={query:scope.$eval(element.attr("eui-query")+" | euiCached"),enabled:enabled},queryCtrl.init()},directive}return QueryDirective}();directives.QueryDirective=QueryDirective,directives.directives.directive("euiQuery",QueryDirective)}(directives=elasticui.directives||(elasticui.directives={}))}(elasticui||(elasticui={}));var elasticui;!function(elasticui){var util;!function(util){var AngularTool=function(){function AngularTool(){}return AngularTool.setupBinding=function($parse,scope,attrs,attrsToBind){angular.forEach(attrsToBind,function(attrName){scope.$watch(attrs[attrName],function(val){scope[attrName]!=val&&(scope[attrName]=val)}),scope[attrName]=$parse(attrs[attrName])(scope)})},AngularTool}();util.AngularTool=AngularTool}(util=elasticui.util||(elasticui.util={}))}(elasticui||(elasticui={}));var elasticui;!function(elasticui){var util;!function(util){var EjsTool=function(){function EjsTool(){}return EjsTool.getJsonFromEjsObject=function(object){return angular.toJson(object.toJSON())},EjsTool.equals=function(objectA,objectB){return!objectA&&!objectB||objectA&&objectB&&this.getJsonFromEjsObject(objectA)==this.getJsonFromEjsObject(objectB)},EjsTool}();util.EjsTool=EjsTool}(util=elasticui.util||(elasticui.util={}))}(elasticui||(elasticui={}));var elasticui;!function(elasticui){var util;!function(util){var SimpleSet=function(){function SimpleSet(){this.objects=[]}return SimpleSet.prototype.indexOf=function(object){return this.objects.indexOf(object)},SimpleSet.prototype.add=function(object){var idx=this.indexOf(object);idx==-1&&this.objects.push(object)},SimpleSet.prototype.remove=function(object){var idx=this.indexOf(object);idx>-1&&this.objects.splice(idx,1)},SimpleSet}();util.SimpleSet=SimpleSet}(util=elasticui.util||(elasticui.util={}))}(elasticui||(elasticui={}));var elasticui;!function(elasticui){var widgets;!function(widgets){var directives;!function(directives){var SearchboxDirective=function(){function SearchboxDirective($parse){var directive={};return directive.restrict="E",directive.scope=!0,directive.link={pre:function(scope,element,attrs){elasticui.util.AngularTool.setupBinding($parse,scope,attrs,["field"])}},directive.template='            <input type="text" eui-query="ejs.MatchQuery(field, querystring)" ng-model="querystring" eui-enabled="querystring.length>=4" />            ',directive}return SearchboxDirective.$inject=["$parse"],SearchboxDirective}();directives.SearchboxDirective=SearchboxDirective,directives.directives.directive("euiSearchbox",SearchboxDirective)}(directives=widgets.directives||(widgets.directives={}))}(widgets=elasticui.widgets||(elasticui.widgets={}))}(elasticui||(elasticui={}));var elasticui;!function(elasticui){var widgets;!function(widgets){var directives;!function(directives){var SearchboxxDirective=function(){function SearchboxxDirective($parse){var directive={};directive.restrict="E",directive.scope=!0,directive.link={pre:function(scope,element,attrs){elasticui.util.AngularTool.setupBinding($parse,scope,attrs,["field"])}};var qIn="ejs.QueryStringQuery(querystring).lenient(true).fields(["+searchables+"])";return directive.template='            <input type="text" eui-query="'+qIn+'" ng-model="querystring" eui-enabled="querystring.length>=3" id="s-box" />            ',directive}return SearchboxxDirective.$inject=["$parse"],SearchboxxDirective}();directives.SearchboxxDirective=SearchboxxDirective,directives.directives.directive("euiSearchboxx",SearchboxxDirective)}(directives=widgets.directives||(widgets.directives={}))}(widgets=elasticui.widgets||(elasticui.widgets={}))}(elasticui||(elasticui={}));